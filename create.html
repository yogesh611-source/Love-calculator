<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Link</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="bg center">

<div class="card">
  <h2>Create Prank Link ðŸ˜ˆ</h2>
  <input id="name" placeholder="Your Name">
  <button class="btn" onclick="register()">Generate Links</button>

  <div id="links" style="display:none">
    <p>Share with friends ðŸ‘‡</p>
    <input id="shareLink" readonly>

    <p><b>Secret Dashboard</b> (Save this)</p>
    <input id="dashLink" readonly>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyB1sYh3UGcubBmxmq70aMAURpolLBGM2_M",
  authDomain: "love-calculator-12.firebaseapp.com",
  projectId: "love-calculator-12",
  storageBucket: "love-calculator-12.firebasestorage.app",
  messagingSenderId: "707941034632",
  appId: "1:707941034632:web:7b6b5a7149b73f7e80cd3d",
  measurementId: "G-CW6SHK3C2T"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.register = async () => {
  const name = document.getElementById("name").value.trim();
  if (!name) return alert("Enter your name");

  const receiverId = crypto.randomUUID();
  const dashboardId = crypto.randomUUID();

  await addDoc(collection(db,"senders"),{
    senderName: name,
    receiverId,
    dashboardId,
    createdAt: Date.now()
  });

  document.getElementById("links").style.display="block";
  shareLink.value = `${location.origin}/prank.html?rid=${receiverId}`;
  dashLink.value = `${location.origin}/dashboard.html?sid=${dashboardId}`;
};
</script>

</body>
</html>